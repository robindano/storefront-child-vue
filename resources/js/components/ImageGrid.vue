<template>
  <div class="image-grid" v-if="$root.images.length">
    <div
      class="image-grid-thumb"
      v-for="image in $root.images"
      :key="image.id"
      @click="$root.currentImage = image"
      :class="{'active': image === $root.currentImage}"
    >
      <img :src="image.thumbnail.url" />
      <div class="remove-thumb" @click="removeImage(image.id)"></div>
    </div>
    <div class="image-grid-thumb upload" @click="$root.showUploader = true">
      <svg xmlns="http://www.w3.org/2000/svg" style="isolation:isolate" viewBox="0 0 150 150">
        <path fill="none" d="M0 0h150v150H0z" />
        <path
          d="M85 45.714H65l-6 6v21a1 1 0 001 1h30a1 1 0 001-1v-21l-6-6zm-6 18v6h-8v-6h-6l10-8 10 8h-6zm-15.172-14l2-2h18.343l2 2H63.828zM73.535 100.813h-1.23v-7.29h1.02l.105 1.05h.045q.48-.525 1.043-.878.562-.352 1.222-.352.84 0 1.313.367.472.368.697 1.028.57-.63 1.148-1.013.577-.382 1.252-.382 1.125 0 1.672.72.548.72.548 2.13v4.62h-1.23v-4.455q0-1.035-.33-1.493-.33-.457-1.02-.457-.825 0-1.83 1.125v5.28h-1.23v-4.455q0-1.035-.33-1.493-.33-.457-1.035-.457-.825 0-1.83 1.125v5.28zm14.04.18q-.675 0-1.283-.255-.607-.255-1.072-.743-.465-.487-.743-1.2-.277-.712-.277-1.612 0-.915.277-1.628.278-.712.743-1.207.465-.495 1.072-.75.608-.255 1.283-.255.675 0 1.283.255.607.255 1.072.75.465.495.743 1.207.277.713.277 1.628 0 .9-.277 1.612-.278.713-.743 1.2-.465.488-1.072.743-.608.255-1.283.255zm0-1.02q.465 0 .855-.203.39-.202.668-.57.277-.367.427-.877.15-.51.15-1.14 0-.63-.15-1.148-.15-.517-.427-.892-.278-.375-.668-.578-.39-.202-.855-.202-.465 0-.855.202-.39.203-.667.578-.278.375-.428.892-.15.518-.15 1.148 0 .63.15 1.14.15.51.428.877.277.368.667.57.39.203.855.203zm6.525.84h-1.23v-7.29h1.02l.105 1.32h.045q.375-.69.907-1.095.533-.405 1.163-.405.435 0 .78.15l-.24 1.08q-.18-.06-.33-.09-.15-.03-.375-.03-.465 0-.968.375-.502.375-.877 1.305v4.68zm6.78.18q-.735 0-1.372-.263-.638-.262-1.11-.75-.473-.487-.743-1.192t-.27-1.605q0-.9.278-1.613.277-.712.735-1.207.457-.495 1.042-.758.585-.262 1.215-.262.69 0 1.238.24.547.24.915.69.367.45.562 1.08.195.63.195 1.41 0 .195-.007.382-.008.188-.038.323H98.6q.075 1.17.728 1.852.652.683 1.702.683.525 0 .968-.158.442-.157.847-.412l.435.81q-.48.3-1.065.525-.585.225-1.335.225zm-2.295-4.41h3.9q0-1.11-.472-1.688-.473-.577-1.328-.577-.39 0-.742.15-.353.15-.638.442-.285.293-.472.713-.188.42-.248.96zm-51.81 4.41q-.915 0-1.522-.54-.608-.54-.608-1.53 0-1.2 1.065-1.838 1.065-.637 3.405-.892 0-.345-.067-.675-.068-.33-.233-.585-.165-.255-.457-.413-.293-.157-.743-.157-.63 0-1.185.24t-.99.54l-.48-.855q.51-.33 1.245-.638.735-.307 1.62-.307 1.335 0 1.935.817.6.818.6 2.183v4.47h-1.02l-.105-.87h-.045q-.525.435-1.125.742-.6.308-1.29.308zm.36-.99q.525 0 .99-.248.465-.247.99-.727v-2.025q-.915.12-1.537.285-.623.165-1.005.39-.383.225-.555.517-.173.293-.173.638 0 .63.375.9t.915.27zm8.01.99q-1.38 0-2.197-.99-.818-.99-.818-2.82 0-.885.263-1.598.262-.712.697-1.207.435-.495 1.005-.765.57-.27 1.2-.27t1.095.225q.465.225.945.615l-.06-1.245v-2.805h1.245v10.68H57.5l-.105-.855h-.045q-.435.42-.997.727-.563.308-1.208.308zm.27-1.035q.51 0 .96-.248.45-.247.9-.757v-3.81q-.465-.42-.892-.593-.428-.172-.878-.172-.435 0-.817.202-.383.203-.668.57-.285.368-.45.878-.165.51-.165 1.14 0 1.32.525 2.055.525.735 1.485.735zm8.055 1.035q-1.38 0-2.197-.99-.818-.99-.818-2.82 0-.885.263-1.598.262-.712.697-1.207.435-.495 1.005-.765.57-.27 1.2-.27t1.095.225q.465.225.945.615l-.06-1.245v-2.805h1.245v10.68h-1.02l-.105-.855h-.045q-.435.42-.997.727-.563.308-1.208.308zm.27-1.035q.51 0 .96-.248.45-.247.9-.757v-3.81q-.465-.42-.893-.593-.427-.172-.877-.172-.435 0-.817.202-.383.203-.668.57-.285.368-.45.878-.165.51-.165 1.14 0 1.32.525 2.055.525.735 1.485.735zm22.463-13.106q-.585 0-.983-.18-.397-.18-.645-.495-.247-.315-.352-.765-.105-.45-.105-.99v-4.035h-1.08v-.93l1.14-.075.15-2.04h1.035v2.04h1.965v1.005h-1.965v4.05q0 .675.247 1.042.248.368.878.368.195 0 .42-.06.225-.06.405-.135l.24.93q-.3.105-.653.187-.352.083-.697.083zm5.399 0q-.674 0-1.282-.255-.607-.255-1.072-.743-.465-.487-.743-1.2-.278-.712-.278-1.612 0-.915.278-1.628.278-.712.743-1.207.465-.495 1.072-.75.608-.255 1.282-.255.676 0 1.283.255.608.255 1.073.75.465.495.742 1.207.277.713.277 1.628 0 .9-.277 1.612-.277.713-.742 1.2-.465.488-1.073.743-.607.255-1.283.255zm0-1.02q.466 0 .856-.203.39-.202.667-.57.278-.367.428-.877.15-.51.15-1.14 0-.63-.15-1.148-.15-.517-.428-.892-.277-.375-.667-.578-.39-.202-.856-.202-.464 0-.854.202-.39.203-.668.578-.277.375-.427.892-.15.518-.15 1.148 0 .63.15 1.14.15.51.427.877.278.368.668.57.39.203.854.203zm-37.199 1.02q-.93 0-1.71-.345-.78-.345-1.358-.998-.577-.652-.9-1.605-.322-.952-.322-2.152 0-1.185.33-2.13.33-.945.915-1.605t1.38-1.013q.795-.352 1.74-.352.9 0 1.582.367.683.368 1.118.848l-.675.81q-.39-.42-.885-.675-.495-.255-1.125-.255-.705 0-1.275.277-.57.278-.975.795-.405.518-.623 1.253-.217.735-.217 1.65 0 .93.217 1.672.218.743.608 1.268t.952.81q.563.285 1.268.285.72 0 1.26-.293.54-.292 1.02-.817l.69.78q-.585.675-1.32 1.05-.735.375-1.695.375zm6.03 0q-.705 0-1.005-.42-.3-.42-.3-1.23v-9.21h1.23v9.3q0 .3.105.42t.24.12h.112q.053 0 .158-.03l.165.93q-.12.06-.285.09-.165.03-.42.03zm3.75-.18h-1.23v-7.29h1.23v7.29zm-.6-8.79q-.36 0-.608-.225-.247-.225-.247-.57 0-.36.247-.578.248-.217.608-.217t.607.217q.248.218.248.578 0 .345-.248.57-.247.225-.607.225zm5.94 8.97q-.72 0-1.35-.255-.63-.255-1.088-.743-.457-.487-.72-1.2-.262-.712-.262-1.612 0-.915.285-1.628.285-.712.765-1.207.48-.495 1.117-.75.638-.255 1.343-.255.72 0 1.23.255t.9.6l-.63.81q-.315-.285-.668-.465-.352-.18-.787-.18-.495 0-.915.202-.42.203-.72.578-.3.375-.473.892-.172.518-.172 1.148 0 .63.165 1.14.165.51.457.877.293.368.713.57.42.203.915.203.51 0 .937-.218.428-.217.773-.517l.54.825q-.495.435-1.095.682-.6.248-1.26.248zm5.175-.18h-1.215v-10.68h1.215v7.23h.045l3.105-3.84h1.365l-2.445 2.925 2.775 4.365h-1.35l-2.13-3.51-1.365 1.59v1.92z"
        />
      </svg>
    </div>
  </div>
</template>

<script>
export default {
  methods: {
    removeImage(id) {
      this.$root.images = this.$root.images.filter(image => image.id !== id);

      if (!this.$root.images.length) {
        this.$root.showUploader = true;
      }
    }
  }
};
</script>

<style lang="scss" scoped>
.image-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  grid-template-rows: 1fr;
  grid-gap: 0.5rem;
  margin-top: 2rem;
  padding: 0.5em;
  border: 1px solid #666;
}

.image-grid button {
}

.image-grid-thumb {
  display: grid;
  cursor: pointer;
  transition: 250ms;
  border: none;
  position: relative;
}

.upload {
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
  font-size: 75%;
  color: #666;
  fill: #666;
  border: 1px solid #666;
  filter: opacity(0.5);
  position: relative;
}
.image-grid-thumb.upload:hover {
  filter: opacity(1);
}

.upload svg {
  width: 100%;
  height: auto;
}

.image-grid-thumb.large {
  min-height: 500px;
}

.image-grid-thumb.large svg {
  width: 50px;
  height: 50px;
}

.image-grid-thumb.large span {
  font-size: 16px;
  margin-top: 4px;
}

.image-grid-thumb img {
  width: 100%;
  object-fit: cover;
  grid-area: 1 / 1 / 2 / 2;
}

.image-grid-thumb:hover img,
.image-grid-thumb.active img {
  filter: opacity(0.5);
}

.image-grid-thumb:hover .remove-thumb {
  display: block;
}

.remove-thumb {
  display: none;
  width: 12px;
  height: 12px;
  background-color: red;
  border-radius: 20px;
  position: absolute;
  right: -4px;
  top: -4px;
  filter: opacity(0.75);
}
.remove-thumb:hover {
  filter: opacity(1);
}
</style>